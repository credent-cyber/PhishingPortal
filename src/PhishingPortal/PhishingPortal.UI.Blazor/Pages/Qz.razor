@page "/quiz"
<h3>Multiple-Choice Quiz</h3>
<form @onsubmit="@SubmitQuiz">
    @foreach (var question in Questions)
    {
            <div class="form-group">
                <h4>@question.Text</h4>
            @foreach (var option in question.Options)
            {
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="@($"q{question.Id}o{option.Id}")" value="@option.Text" @bind="@option.Selected" />
                            <label class="form-check-label" for="@($"q{question.Id}o{option.Id}")">@option.Text</label>
                        </div>
            }
            </div>
    }
    <button class="btn btn-primary" type="submit">Submit</button>
</form>

@if (_showResults)
{
        <div class="mt-3">
            <h4>Your Answers:</h4>
            <ul>
            @foreach (var question in Questions)
            {
                        <li>@($"Question {question.Id}: {GetSelectedAnswerText(question)}")</li>
            }
            </ul>
        </div>
}

@code {
    private List<Question> Questions { get; set; } = new List<Question>
    {
        new Question
        {
            Id = 1,
            Text = "What is the capital of France?",
            Options = new List<Option>
            {
                new Option { Id = 1, Text = "Paris" },
                new Option { Id = 2, Text = "Berlin" },
                new Option { Id = 3, Text = "London" },
            }
        },
        new Question
        {
            Id = 2,
            Text = "What is the largest planet in our solar system?",
            Options = new List<Option>
            {
                new Option { Id = 1, Text = "Jupiter" },
                new Option { Id = 2, Text = "Mars" },
                new Option { Id = 3, Text = "Earth" },
            }
        },
    };

    private bool _showResults = false;

    private void SubmitQuiz()
    {
        _showResults = true;
    }

    private string GetSelectedAnswerText(Question question)
    {
        var selectedOptions = question.Options.Where(o => o.Selected);
        if (selectedOptions.Any())
        {
            return string.Join(", ", selectedOptions.Select(o => o.Text));
        }
        else
        {
            return "Not answered";
        }
    }

    public class Question
    {
        public int Id { get; set; }
        public string Text { get; set; }
        public List<Option> Options { get; set; }
    }

    public class Option
    {
        public int Id { get; set; }
        public string Text { get; set; }
        public bool Selected { get; set; }
    }
}
